-- [dimDate] definition

CREATE TABLE [dimDate] (
	[datID] INTEGER NOT NULL,
	[datValue] INTEGER DEFAULT 0,
	CONSTRAINT SYS_PK_10518 PRIMARY KEY ([datID])
);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10518_10519 ON [dimDate] ([datID]);

-- [dimPCategory] definition

CREATE TABLE [dimPCategory] (
	[pcaID] INTEGER NOT NULL,
	[pcaName] VARCHAR(255),
	CONSTRAINT SYS_PK_10528 PRIMARY KEY ([pcaID])
);
CREATE INDEX DIMPCATEGORY_PCAID ON [dimPCategory] ([pcaID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10528_10529 ON [dimPCategory] ([pcaID]);

-- [dimStatus] definition


CREATE TABLE [dimStatus] (
	[staID] INTEGER NOT NULL,
	[staName] VARCHAR(255),
	CONSTRAINT SYS_PK_10548 PRIMARY KEY ([staID])
);
CREATE INDEX DIMSTATUS_STAID ON [dimStatus] ([staID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10548_10549 ON [dimStatus] ([staID]);

-- [dimPriority] definition

CREATE TABLE [dimPriority] (
	[priID] INTEGER NOT NULL,
	[priName] VARCHAR(255),
	[priWeight] SMALLINT DEFAULT 0,
	CONSTRAINT SYS_PK_10533 PRIMARY KEY ([priID])
);
CREATE INDEX DIMPRIORITY_PRIID ON [dimPriority] ([priID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10533_10534 ON [dimPriority] ([priID]);

-- [dimCompany] definition

CREATE TABLE [dimCompany] (
	[comID] INTEGER NOT NULL,
	[comName] VARCHAR(255),
	CONSTRAINT SYS_PK_10513 PRIMARY KEY ([comID])
);
CREATE INDEX DIMCOMPANY_COMID ON [dimCompany] ([comID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10513_10514 ON [dimCompany] ([comID]);

-- [dimEmployee] definition

CREATE TABLE [dimEmployee] (
	[empID] INTEGER NOT NULL,
	[empFName] VARCHAR(255),
	[empLName] VARCHAR(255),
	[comID] INTEGER DEFAULT 0,
	[empEMail] VARCHAR(255),
	[posID] INTEGER DEFAULT 0,
	[empPhone] VARCHAR(255),
	CONSTRAINT SYS_PK_10523 PRIMARY KEY ([empID])
);
CREATE INDEX DIMEMPLOYEE_COMID ON [dimEmployee] ([comID]);
CREATE INDEX DIMEMPLOYEE_EMPID ON [dimEmployee] ([empID]);
CREATE INDEX DIMEMPLOYEE_POSID ON [dimEmployee] ([posID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10523_10524 ON [dimEmployee] ([empID]);

-- [fctTask] definition

CREATE TABLE [fctTask] (
	[tskID] INTEGER NOT NULL,
	[tskName] VARCHAR(255),
	[prjID] INTEGER DEFAULT 0,
	[sdaID] INTEGER DEFAULT 0,
	[cdaID] INTEGER DEFAULT 0,
	[empID] INTEGER DEFAULT 0,
	[priID] INTEGER DEFAULT 0,
	[staID] INTEGER DEFAULT 0,
	[tskCost] NUMERIC(100,2) DEFAULT 0,
	[tskCostHours] NUMERIC(100,7) DEFAULT 0,
	[tskDescription] VARCHAR(255),
	[tskAttachments] OTHER,
	CONSTRAINT SYS_PK_10567 PRIMARY KEY ([tskID])
);
CREATE INDEX FCTTASK_TSKID ON [fctTask] ([tskID]);
CREATE INDEX SYS_IDX_FCTTASK_DIMDATEDIMTASK1_10667 ON [fctTask] ([cdaID]);
CREATE INDEX SYS_IDX_FCTTASK_DIMDATEDIMTASK_10658 ON [fctTask] ([sdaID]);
CREATE INDEX SYS_IDX_FCTTASK_DIMEMPLOYEEDIMTASK_10676 ON [fctTask] ([empID]);
CREATE INDEX SYS_IDX_FCTTASK_DIMPPRIORITYDIMTASK_10685 ON [fctTask] ([priID]);
CREATE INDEX SYS_IDX_FCTTASK_DIMPSTATUSDIMTASK_10694 ON [fctTask] ([staID]);
CREATE INDEX SYS_IDX_FCTTASK_FCTPROJECTDIMTASK_10703 ON [fctTask] ([prjID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10567_10568 ON [fctTask] ([tskID]);


-- [fctTask] foreign keys

ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_DIMDATEDIMTASK FOREIGN KEY ([sdaID]) REFERENCES [dimDate]([datID]) ON DELETE CASCADE;
ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_DIMDATEDIMTASK1 FOREIGN KEY ([cdaID]) REFERENCES [dimDate]([datID]) ON DELETE CASCADE;
ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_DIMEMPLOYEEDIMTASK FOREIGN KEY ([empID]) REFERENCES [dimEmployee]([empID]) ON DELETE CASCADE;
ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_DIMPPRIORITYDIMTASK FOREIGN KEY ([priID]) REFERENCES [dimPriority]([priID]) ON DELETE CASCADE;
ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_DIMPSTATUSDIMTASK FOREIGN KEY ([staID]) REFERENCES [dimStatus]([staID]) ON DELETE CASCADE;
ALTER TABLE [fctTask] ADD CONSTRAINT FCTTASK_FCTPROJECTDIMTASK FOREIGN KEY ([prjID]) REFERENCES [fctProject]([prjID]) ON DELETE CASCADE;

-- [fctProject] definition

-- Drop table

-- DROP TABLE [fctProject];

CREATE TABLE [fctProject] (
	[prjID] INTEGER NOT NULL,
	[prjName] VARCHAR(255),
	[datID] INTEGER DEFAULT 0,
	[empID] INTEGER DEFAULT 0,
	[pcaID] INTEGER DEFAULT 0,
	[priID] INTEGER DEFAULT 0,
	[staID] INTEGER DEFAULT 0,
	[prjCost] NUMERIC(100,2) DEFAULT 0,
	[prjCostHours] NUMERIC(100,2) DEFAULT 0,
	[prjDescription] VARCHAR(255),
	[prjAttachments] OTHER,
	CONSTRAINT SYS_PK_10558 PRIMARY KEY ([prjID])
);
CREATE INDEX FCTPROJECT_FPJID ON [fctProject] ([prjID]);
CREATE INDEX SYS_IDX_FCTPROJECT_DIMDATEFCTPROJECT_10613 ON [fctProject] ([datID]);
CREATE INDEX SYS_IDX_FCTPROJECT_DIMEMPLOYEEFCTPROJECT_10622 ON [fctProject] ([empID]);
CREATE INDEX SYS_IDX_FCTPROJECT_DIMPCATEGORYFCTPROJECT_10631 ON [fctProject] ([pcaID]);
CREATE INDEX SYS_IDX_FCTPROJECT_DIMPPRIORITYFCTPROJECT_10640 ON [fctProject] ([priID]);
CREATE INDEX SYS_IDX_FCTPROJECT_DIMPSTATUSFCTPROJECT_10649 ON [fctProject] ([staID]);
CREATE UNIQUE INDEX SYS_IDX_SYS_PK_10558_10559 ON [fctProject] ([prjID]);


-- [fctProject] foreign keys

ALTER TABLE [fctProject] ADD CONSTRAINT FCTPROJECT_DIMDATEFCTPROJECT FOREIGN KEY ([datID]) REFERENCES [dimDate]([datID]) ON DELETE CASCADE;
ALTER TABLE [fctProject] ADD CONSTRAINT FCTPROJECT_DIMEMPLOYEEFCTPROJECT FOREIGN KEY ([empID]) REFERENCES [dimEmployee]([empID]) ON DELETE CASCADE;
ALTER TABLE [fctProject] ADD CONSTRAINT FCTPROJECT_DIMPCATEGORYFCTPROJECT FOREIGN KEY ([pcaID]) REFERENCES [dimPCategory]([pcaID]) ON DELETE CASCADE;
ALTER TABLE [fctProject] ADD CONSTRAINT FCTPROJECT_DIMPPRIORITYFCTPROJECT FOREIGN KEY ([priID]) REFERENCES [dimPriority]([priID]) ON DELETE CASCADE;
ALTER TABLE [fctProject] ADD CONSTRAINT FCTPROJECT_DIMPSTATUSFCTPROJECT FOREIGN KEY ([staID]) REFERENCES [dimStatus]([staID]) ON DELETE CASCADE;
